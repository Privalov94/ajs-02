"use strict";

var ajs = require("..");

ajs.render("<% fruits.forEach(function (c) { -%>\n<%= c %>s are great\n<% }) %>", {
    locals: {
        fruits: ["Apple", "Pear", "Orange"]
    }
}, function (err, data) {
    console.log(err || data);
    // =>
    // Apples are great
    // Pears are great
    // Oranges are great
});

// Do some async stuff
ajs.render("<% fetchData(function (err, msg) {\n   if (err) { %>\n     Error: <%= err.message %>\n   <% } else {\n    <%= msg %>\n   <% } %>\n<% }) %>", {
    locals: {
        fetchData: function fetchData(cb) {
            return setTimeout(function () {
                return cb(null, "Hey there!");
            }, 1000);
        }
    }
}, function (err, data) {
    console.log(err || data);
    // =>
    // Hey there!
});